<dom-module id="detail-product-page">
  	<template> 
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
	    <script src="important_js.js"></script>
	    <link rel="stylesheet" href="../mystyle.css">

		<main class="container">
			<section class="row">
				<div class="col s12">
					<article class="card">
						<div class="row card-content">
							<div class="img-container col s6">
								<img src="{{picture}}" alt="Product" class="col s12" />
							</div>
							<div class="col s6">
								<header class="card-title" style="word-wrap: break-word;">{{name}}</header>
								<p style="word-wrap: break-word;">{{description}}</p>
								<h2>R$ {{price}}</h2>
								<div class="row" >
									<div class="input-field col s3">
										<input placeholder="Qtd" type="number" min="1" max="{{stock}}" id="quantity" name="Quantity" value="{{quantity}}" class="btn-sized" />
									</div>
									<div class="input-field col s9">
										<a id="add_button" class="btn">Adicionar ao Carrinho</a>
									</div>
								</div>
							</div>
						</div>
					</article>
				</div>
			</section>
		</main>
	</template>

	<script type="text/javascript">
		function initialize(){

		}
	</script>
  	<script>
	    Polymer({
			is: 'detail-product-page',
			properties:{
				product_id: String,
				description: String,
				name: String,
				price: String,
				stock: String,
				image: String,
				quantity: String,
			},

			ready: function(){
				this.description = "";
				this.name = "";
				this.price = "";
				this.stock = "";
				this.picture = "";
				this.quantity = "1";

				$.get(serverURL + "products/" + this.product_id, function(data, status){
					this.description = data.description;
					this.name = data.name;
					this.price = parseFloat(data.price).toFixed(2);
					this.stock = data.stock;
					this.picture = serverURL + data.picture;
			    }.bind(this));
			    
			    $(this.$.add_button).click(e => {
			    	addToCart(this.product_id, parseInt($(this.$.quantity).val()));
			    	alert("Produto adicionado com sucesso!")
		        })
			}
	    });
  	</script>
</dom-module>