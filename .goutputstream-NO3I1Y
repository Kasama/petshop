<dom-module id="login-page">
		<script src="important_js.js"></script>
	<template>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
	    <link href="../mystyle.css" rel="stylesheet">

		<main class="container">
			<section class="row">
				<div class="col s12 m12">
					<article class="card">
						<div class="card-content">
							<header class="card-title">Login</header>
							<form class="container" accept-charset="utf-8">
								<div class="row">
									<div class="row">
										<div class="input-field s3">
											<input placeholder="Email" type="text" name="Email" value="" id="Email" />
										</div>
									</div>
									<div class="row">
										<div class="input-field s3">
											<input placeholder="Password" type="password" name="Password" value="" id="Password" />
										</div>
										<div class="input-field s3 left">
											<a class="btn" href="/register/client.html">Ainda não é cadastrado?</a>
										</div>
										<div class="input-field s3 right">
											<a class="btn" id="submit">Login →</a>
										</div>
									</div>
								</div>
							</form>
						</div>
					</article>
				</div>
			</section>
		</main>
	</template>

	<script>
		Polymer({
			is: 'login-page',
			properties:{
				after_login_page: String,
				after_login_data: Object,
			},
			ready: function() {
				$.ajax(serverURL + where + '/' + id + '/add', {
					cache: false,
					method: 'POST',
					data: {email: 'algo@algo.com', password: '****'},
					success: (result, status, xhr) => {
						$(this.$.submit).click(e => {
							if(result.success == false){
								Materialize.toast('Usuário não registrado')
							}else{
								sendMessage(this, "do-login", {user_id: result.user._id, admim: result.admin})
								if(this.after_login_page){
									changePage(this, this.after_login_page, this.after_login_data)
								}else{
									changePage(this, "init-page")
								}
							}
						})
					},
					error: (xhr, status, error) => {
						Materialize.toast('Erro inesperado: ' + JSON.stringify(error), 3000);
					},
				});
			}
		});
	</script>
</dom-module>
